os: osx
language: swift
osx_image: xcode10.3
xcode_project: UB.xcodeproj
xcode_scheme: UB.Package

branches:
  only:
    - master

before_install:
  - |
      if ! git diff --name-only $TRAVIS_COMMIT_RANGE | grep -qvE '(.md)|(.html)|^(LICENSE)|^(docs)'
      then
        echo "Only docs were updated, not running the full CI."
        exit
      fi

install: make xcode

jobs:
  include:
    - stage: Test
      name: Run Tests
      script: make tet
     
    - stage: Docs
      name: Deploy Docs
      if: tag IS present
      script: ./scripts/deploy-docs.sh

notifications:
  email: false
